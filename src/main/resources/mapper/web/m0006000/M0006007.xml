<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dowinsys.mes.web.m0006000.mapper.M0006007Mapper">
	<select id="getGrid1Data" resultType="CamelMap">
		select 공정코드,공정명,area as 공정구분,remark as 비고
		FROM dw_step_mast
		order by 1,2,4
	</select>
	
	<select id="getGrid2Data" resultType="CamelMap">
		select  line,공정코드,불량명,불량코드, 적용구분,비고,적용순서,rw_적용,
				사용여부,
				ISNULL(신뢰성인계여부,0) 신뢰성인계여부,
				ISNULL(수율불량제외여부,0) 수율불량제외여부,
				ISNULL(Rework진행여부,0) Rework진행여부
		FROM d29_공정별불량파일
	    where 공정코드 = #{공정코드}
		order by 적용순서
	</select>
	
	<insert id="insertData">
	INSERT INTO d29_공정별불량파일
	(	line,
		공정코드,
		불량코드,
		적용구분,
		불량명,
		RW_적용,
		Excel_Col,
		적용순서,
		사용여부,
		비고,
		신뢰성인계여부,
		수율불량제외여부,
		Rework진행여부
	)
	VALUES
	(	
		#{line}
		#{공정코드},
	 	#{불량코드},
	  	#{적용구분},
	  	#{불량명},
	    #{rw적용},
	    0,
	 	#{적용순서},
	  	#{사용여부},
	  	#{비고},
	  	#{신뢰성인계여부},
		#{수율불량제외여부},
		#{rework진행여부}
	);
	</insert>
	
	<insert id="insertDataAll">
		INSERT INTO d29_공정별불량파일
		(
			line,
			공정코드,
			불량코드,
			적용구분,
			불량명,
			RW_적용,
			Excel_Col,
			적용순서,
			사용여부,
			비고,
			신뢰성인계여부,
			수율불량제외여부,
			Rework진행여부
		)
		VALUES
		<foreach item="item" collection="insert"  separator=","  >
			(
				#{item.line},
				#{item.공정코드},
				#{item.불량코드},
			  	#{item.적용구분},
			  	#{item.불량명},
			    #{item.rw적용},
			    0,
			 	#{item.적용순서},
			  	#{item.사용여부},
			  	#{item.비고},
			  	#{item.신뢰성인계여부},
				#{item.수율불량제외여부},
				#{item.rework진행여부}
			)
		</foreach>
	</insert>
	<delete id="deleteDataAll">
		DELETE FROM d29_공정별불량파일
		WHERE 공정코드 = #{공정코드}
	</delete>
	
	<delete id="deleteData">
		DELETE FROM d29_공정별불량파일
		WHERE 공정코드 = #{공정코드}
		AND	불량코드 = #{불량코드}
		AND 적용구분 = #{적용구분}
		AND line = #{line}
	</delete>
	
	<update id="updateData">
	   UPDATE d29_공정별불량파일
	   SET  불량명=#{불량명},
	    	RW_적용=#{rw적용},
	      	적용순서=#{적용순서},
	       	사용여부=#{사용여부},
	        비고=#{비고},
	        신뢰성인계여부=#{신뢰성인계여부},
			수율불량제외여부=#{수율불량제외여부},
			Rework진행여부=#{rework진행여부}
		WHERE 공정코드 = #{공정코드}
		AND	불량코드 = #{불량코드}
		AND 적용구분 = #{적용구분}
		AND line = #{line}
	</update>
</mapper>